<!DOCTYPE html><html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DropshipLite â€” Your Dropshipping Store</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0b1020;--card:#101835;--text:#e5edff;--muted:#94a3b8;--line:rgba(255,255,255,.12);--primary:#7c9cff;--accent:#22c55e;--warn:#f59e0b;--danger:#ef4444}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,sans-serif;background:linear-gradient(180deg,#0b1020,#0e1736);color:var(--text)}
    header{position:sticky;top:0;background:rgba(11,16,32,.9);backdrop-filter:blur(8px);border-bottom:1px solid var(--line);z-index:50}
    .container{max-width:1100px;margin:0 auto;padding:16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .logo{width:34px;height:34px;border-radius:12px;background:conic-gradient(from 180deg,#7c9cff,#22c55e,#7c9cff);box-shadow:0 0 0 2px rgba(255,255,255,.08) inset}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .btn{cursor:pointer;border:1px solid var(--line);border-radius:12px;padding:10px 14px;font-weight:700;background:#121a3d;color:var(--text)}
    .btn.primary{background:var(--primary);color:#0b1020;border-color:transparent}
    .btn.accent{background:var(--accent);color:#06250f;border-color:transparent}
    .btn.ghost{background:transparent}
    .search{flex:1;min-width:200px;background:#0f1633;border:1px solid var(--line);color:var(--text);padding:10px 12px;border-radius:10px}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    @media (max-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:768px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:520px){.grid{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg,#101835,#0f1633);border:1px solid var(--line);border-radius:16px;overflow:hidden}
    .card img{width:100%;aspect-ratio:1/1;object-fit:cover}
    .card .content{padding:12px}
    .muted{color:var(--muted)}
    .price{font-weight:800}
    .pill{display:inline-flex;gap:8px;align-items:center;border:1px solid var(--line);background:#0f1633;padding:8px 12px;border-radius:999px}.cart-dock{position:fixed;right:16px;bottom:16px;z-index:60}
.cart-card{background:#0f1736;border:1px solid var(--line);border-radius:16px;min-width:270px;max-width:360px;padding:12px;box-shadow:0 16px 40px rgba(0,0,0,.35)}
.line{height:1px;background:var(--line);margin:10px 0}

dialog{border:1px solid var(--line);border-radius:18px;background:#0f1633;color:var(--text);max-width:760px;width:92%;padding:0}
dialog::backdrop{background:rgba(6,10,22,.6)}
.modal-h{padding:14px 18px;border-bottom:1px solid var(--line);display:flex;justify-content:space-between;align-items:center}
.modal-b{padding:16px 18px}
input,textarea,select{width:100%;background:#0e1430;border:1px solid var(--line);color:var(--text);padding:10px 12px;border-radius:10px}

table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid var(--line);text-align:left;vertical-align:top}
code{background:#0e1430;border:1px solid var(--line);padding:2px 6px;border-radius:6px}
footer{margin:36px 0 80px;color:var(--muted);text-align:center}

  </style>
</head>
<body>
<header>
  <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px">
    <div class="brand"><div class="logo"></div> DropshipLite</div>
    <div class="toolbar">
      <input id="search" class="search" placeholder="Search products..."/>
      <button class="btn" id="btnImport">Import JSON</button>
      <button class="btn ghost" id="btnAdmin">Admin</button>
      <button class="btn primary" id="btnCheckout">Checkout (<span id="cartCount">0</span>)</button>
    </div>
  </div>
</header><main class="container">
  <section style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin:14px 0 18px">
    <span class="pill">ðŸš€ Dropshipping ready</span>
    <span class="pill">ðŸ§® Auto margin & profit</span>
    <span class="pill">ðŸ“¦ Supplier link saved</span>
    <a href="#" id="howLink" class="muted">How it works?</a>
  </section>  <section id="products" class="grid"></section>
</main><!-- Cart Dock --><div class="cart-dock">
  <div class="cart-card">
    <div style="display:flex;justify-content:space-between;align-items:center"><strong>Cart</strong><button class="btn ghost" id="clearCart">Clear</button></div>
    <div id="cartItems" class="muted" style="font-size:14px">No items yet.</div>
    <div class="line"></div>
    <div style="display:flex;justify-content:space-between"><div>Total</div><div><strong>â‚¹ <span id="cartTotal">0</span></strong></div></div>
    <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
      <button class="btn primary" id="dockCheckout">Checkout</button>
      <button class="btn" id="saveCart">Save Cart</button>
    </div>
  </div>
</div><!-- Checkout Modal --><dialog id="checkoutModal">
  <div class="modal-h"><strong>Checkout</strong><button class="btn ghost" onclick="checkoutModal.close()">Close</button></div>
  <div class="modal-b">
    <form id="checkoutForm">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <div>
          <label>Name</label>
          <input name="name" required placeholder="Full name"/>
        </div>
        <div>
          <label>Phone</label>
          <input name="phone" required pattern="[0-9]{10}" placeholder="10-digit"/>
        </div>
        <div>
          <label>Email</label>
          <input name="email" type="email" placeholder="you@example.com"/>
        </div>
        <div>
          <label>City</label>
          <input name="city" required placeholder="City"/>
        </div>
        <div style="grid-column:1/-1">
          <label>Address</label>
          <textarea name="address" rows="3" required placeholder="House no, Street, Area"></textarea>
        </div>
        <div>
          <label>Pincode</label>
          <input name="pincode" required pattern="[0-9]{6}" placeholder="6-digit"/>
        </div>
        <div>
          <label>Payment</label>
          <select name="payment"><option>Cash on Delivery</option><option>UPI</option><option>Card</option></select>
        </div>
      </div>
      <div class="line"></div>
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>Payable</div><div style="font-size:20px;font-weight:800">â‚¹ <span id="payable">0</span></div>
      </div>
      <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn primary" type="submit">Place Order</button>
        <button class="btn" type="button" id="btnPreviewOrder">Preview</button>
      </div>
      <div id="orderPreview" class="muted" style="display:none;margin-top:10px;font-size:14px"></div>
    </form>
  </div>
</dialog><!-- Admin Modal --><dialog id="adminModal">
  <div class="modal-h"><strong>Admin â€” Orders & Products</strong><button class="btn ghost" onclick="adminModal.close()">Close</button></div>
  <div class="modal-b">
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px">
      <input id="adminSearch" class="search" placeholder="Search orders by name, phone, email, city, order id"/>
      <select id="statusFilter">
        <option value="">All Status</option><option>New</option><option>Processing</option><option>Shipped</option><option>Completed</option><option>Cancelled</option>
      </select>
      <button class="btn" id="exportCsv">Export CSV</button>
      <span class="pill">Total: <span id="countAll">0</span></span>
      <span class="pill">Today: <span id="countToday">0</span></span>
    </div><details open>
  <summary style="font-weight:700;margin-bottom:8px">Orders</summary>
  <div style="overflow:auto;max-height:45vh">
    <table id="ordersTable">
      <thead><tr><th>When</th><th>Order ID</th><th>Customer</th><th>Items</th><th>Total</th><th>Status</th><th>Supplier</th><th>Actions</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</details>

<details>
  <summary style="font-weight:700;margin:10px 0 6px">Products</summary>
  <div style="overflow:auto;max-height:35vh">
    <table id="prodTable">
      <thead><tr><th>Image</th><th>Name</th><th>Sell â‚¹</th><th>Cost â‚¹</th><th>Margin â‚¹</th><th>Supplier Link</th><th>SKU</th><th>Actions</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</details>

<p class="muted" style="margin-top:10px">Tip: Add supplier link + cost. The site will auto-calc margin and include supplier details when you forward the order.</p>

  </div>
</dialog><!-- How Modal --><dialog id="howModal">
  <div class="modal-h"><strong>How DropshipLite works</strong><button class="btn ghost" onclick="howModal.close()">Close</button></div>
  <div class="modal-b">
    <ol>
      <li>Import or add products. For each item, set <em>Sell price</em>, <em>Supplier cost</em>, <em>Supplier link</em>, and optional <em>SKU</em>.</li>
      <li>Customer orders on your site â†’ Order is saved.</li>
      <li>Go to <em>Admin</em> â†’ open order â†’ <em>Forward to Supplier</em> to copy a ready message (includes address, items, and chosen supplier links) you can paste into WhatsApp/Email/Portal.</li>
      <li>Export to CSV for bookkeeping. Connect to Firebase/Mongo later for syncing across devices.</li>
    </ol>
    <p class="muted">This demo uses localStorage for quick testing. I can wire it to Firebase + Razorpay in minutes.</p>
  </div>
</dialog><footer>
  <div class="container">Â© <span id="year"></span> DropshipLite demo â€¢ <a href="#" id="resetData" class="muted">Reset demo data</a></div>
</footer><script>
  // ---------- Utils ----------
  const fmt = n => (n||0).toLocaleString('en-IN');
  const INR = n => `â‚¹ ${fmt(n)}`;
  const uid = ()=>'OD' + Math.random().toString(36).slice(2,8).toUpperCase() + '-' + Date.now().toString().slice(-4);
  const todayISO = () => new Date().toISOString().slice(0,10);
  const LS = {PROD:'dl_products', CART:'dl_cart', ORD:'dl_orders'};

  const store = {
    get:k=>{try{return JSON.parse(localStorage.getItem(k))}catch(e){return null}},
    set:(k,v)=>localStorage.setItem(k,JSON.stringify(v)),
    del:k=>localStorage.removeItem(k)
  };

  // ---------- Demo products ----------
  const defaultProducts=[
    {id:'p1', name:'Mini Tripod Stand', price:499, cost:299, sku:'TRI-MINI', link:'https://example.com/supplier/tripod', img:'https://picsum.photos/seed/tripod/600/600', desc:'Phone tripod with adjustable head'},
    {id:'p2', name:'LED Ring Light 10"', price:1299, cost:799, sku:'RING-10', link:'https://example.com/supplier/ring', img:'https://picsum.photos/seed/ring/600/600', desc:'3 color modes, USB powered'},
    {id:'p3', name:'Wireless Earbuds', price:1499, cost:899, sku:'EBD-Z1', link:'https://example.com/supplier/earbuds', img:'https://picsum.photos/seed/ear/600/600', desc:'ENC mic, 28h battery'},
    {id:'p4', name:'Multipurpose Kitchen Chopper', price:699, cost:399, sku:'CHOP-MP', link:'https://example.com/supplier/chopper', img:'https://picsum.photos/seed/chop/600/600', desc:'Hand pull, stainless blades'}
  ];

  let products = store.get(LS.PROD) || defaultProducts;
  let cart     = store.get(LS.CART) || [];
  let orders   = store.get(LS.ORD)  || [];

  // ---------- Render Products ----------
  const productsEl = document.getElementById('products');
  const searchEl = document.getElementById('search');

  function renderProducts(list){
    productsEl.innerHTML='';
    list.forEach(p=>{
      const el=document.createElement('article');
      el.className='card';
      el.innerHTML=`
        <img src="${p.img}" alt="${p.name}">
        <div class="content">
          <div style="display:flex;justify-content:space-between;gap:8px;align-items:flex-start">
            <div>
              <div style="font-weight:700">${p.name}</div>
              <div class="muted" style="font-size:12px">${p.desc||''}</div>
              <div class="muted" style="font-size:12px">Supplier: <a href="${p.link}" target="_blank">link</a> â€¢ Cost ${INR(p.cost||0)}</div>
            </div>
            <div class="price">${INR(p.price)}</div>
          </div>
          <div style="display:flex;gap:8px;margin-top:10px;flex-wrap:wrap">
            <button class="btn primary" data-add="${p.id}">Add to Cart</button>
            <button class="btn" data-buy="${p.id}">Buy Now</button>
          </div>
        </div>`;
      productsEl.appendChild(el);
    })
  }

  function filterProducts(){
    const q=(searchEl.value||'').toLowerCase().trim();
    if(!q) return renderProducts(products);
    renderProducts(products.filter(p=>`${p.name} ${p.desc} ${p.sku}`.toLowerCase().includes(q)));
  }
  searchEl.addEventListener('input', filterProducts);

  // ---------- Cart ----------
  const cartItemsEl=document.getElementById('cartItems');
  const cartTotalEl=document.getElementById('cartTotal');
  const cartCountEl=document.getElementById('cartCount');

  function addToCart(id,qty=1){
    const it = cart.find(c=>c.id===id); if(it) it.qty+=qty; else cart.push({id,qty});
    store.set(LS.CART,cart); renderCart();
  }
  function removeFromCart(id){ cart=cart.filter(c=>c.id!==id); store.set(LS.CART,cart); renderCart(); }
  function updateQty(id,q){ const it=cart.find(c=>c.id===id); if(it){ it.qty=Math.max(1,q|0); store.set(LS.CART,cart); renderCart(); } }

  function cartSummary(){
    let total=0,count=0; const lines=cart.map(c=>{const p=products.find(x=>x.id===c.id); const line=(p.price||0)*c.qty; total+=line; count+=c.qty; return {id:p.id,name:p.name,qty:c.qty,price:p.price,cost:p.cost,sku:p.sku,link:p.link,line};});
    return {total,count,lines};
  }

  function renderCart(){
    const {total,count,lines}=cartSummary();
    cartCountEl.textContent=count; cartTotalEl.textContent=fmt(total);
    if(!lines.length){ cartItemsEl.textContent='No items yet.'; return; }
    cartItemsEl.innerHTML = lines.map(l=>`
      <div style="display:flex;justify-content:space-between;gap:8px;margin:6px 0">
        <div>
          <div style="font-weight:600">${l.name} <span class="muted">(${l.sku||''})</span></div>
          <div class="muted" style="font-size:12px">${INR(l.price)} Ã— 
            <input type="number" min="1" value="${l.qty}" data-qty="${l.id}" style="width:64px;background:#0e1430;border:1px solid var(--line);color:var(--text);padding:4px 6px;border-radius:8px"> = <strong>${INR(l.line)}</strong></div>
        </div>
        <button class="btn ghost" data-remove="${l.id}">Remove</button>
      </div>`).join('');

    cartItemsEl.querySelectorAll('[data-qty]').forEach(inp=> inp.addEventListener('change',e=> updateQty(e.target.getAttribute('data-qty'), +e.target.value)) );
    cartItemsEl.querySelectorAll('[data-remove]').forEach(btn=> btn.addEventListener('click',()=> removeFromCart(btn.getAttribute('data-remove'))) );
  }

  document.addEventListener('click',(e)=>{
    const add = e.target.getAttribute && e.target.getAttribute('data-add');
    const buy = e.target.getAttribute && e.target.getAttribute('data-buy');
    if(add){ addToCart(add,1); }
    if(buy){ addToCart(buy,1); openCheckout(); }
  });

  document.getElementById('clearCart').onclick=()=>{ cart=[]; store.set(LS.CART,cart); renderCart(); };
  document.getElementById('saveCart').onclick=()=> alert('Cart saved on this device âœ”');

  // ---------- Checkout ----------
  const checkoutModal=document.getElementById('checkoutModal');
  const payableEl=document.getElementById('payable');
  function openCheckout(){
    const {total}=cartSummary(); if(total<=0) return alert('Cart is empty');
    payableEl.textContent=fmt(total); document.getElementById('orderPreview').style.display='none';
    checkoutModal.showModal();
  }
  document.getElementById('dockCheckout').onclick=openCheckout;
  document.getElementById('btnCheckout').onclick=openCheckout;

  document.getElementById('btnPreviewOrder').onclick=()=>{
    const f=new FormData(document.getElementById('checkoutForm'));
    const {lines,total}=cartSummary();
    const html=[`<strong>Items</strong>`, '<ul>'+lines.map(l=>`<li>${l.name} (${l.sku||''}) Ã— ${l.qty} = ${INR(l.line)}</li>`).join('')+'</ul>', `<div><strong>Total:</strong> ${INR(total)}</div>`, '<div class="line"></div>', `<div><strong>Name:</strong> ${f.get('name')||'-'} | <strong>Phone:</strong> ${f.get('phone')||'-'}</div>`, `<div><strong>Address:</strong> ${(f.get('address')||'-')}, ${(f.get('city')||'')}, ${f.get('pincode')||''}</div>`].join('');
    const box=document.getElementById('orderPreview'); box.innerHTML=html; box.style.display='block';
  };

  document.getElementById('checkoutForm').addEventListener('submit',(e)=>{
    e.preventDefault();
    const {total,lines}=cartSummary(); if(total<=0) return alert('Cart is empty');
    const fd=new FormData(e.target);
    const order={ id:uid(), createdAt:new Date().toISOString(), status:'New', total,
      items:lines.map(l=>({id:l.id,name:l.name,qty:l.qty,price:l.price,cost:l.cost,sku:l.sku,link:l.link})),
      customer:{ name:fd.get('name'), phone:fd.get('phone'), email:fd.get('email'), address:fd.get('address'), city:fd.get('city'), pincode:fd.get('pincode'), payment:fd.get('payment') }
    };
    orders.unshift(order); store.set(LS.ORD,orders); cart=[]; store.set(LS.CART,cart); renderCart(); checkoutModal.close();
    alert(`Order placed!\nOrder ID: ${order.id}`);
  });

  // ---------- Admin ----------
  const adminModal=document.getElementById('adminModal');
  const ordersTableBody=document.querySelector('#ordersTable tbody');
  const adminSearch=document.getElementById('adminSearch');
  const statusFilter=document.getElementById('statusFilter');
  const countAll=document.getElementById('countAll');
  const countToday=document.getElementById('countToday');
  const ADMIN_PASS='admin123';

  document.getElementById('btnAdmin').onclick=()=>{ const ok=prompt('Enter admin password:'); if(ok===ADMIN_PASS){ renderOrders(); renderProdTable(); adminModal.showModal(); } else if(ok!==null){ alert('Wrong password'); } };

  function renderOrders(){
    orders=store.get(LS.ORD)||[];
    const q=(adminSearch.value||'').toLowerCase().trim(); const sf=statusFilter.value;
    const list=orders.filter(o=>{const hay=[o.id,o.customer.name,o.customer.email,o.customer.phone,o.customer.city].join(' ').toLowerCase(); return (!q||hay.includes(q)) && (!sf||o.status===sf) });
    countAll.textContent=orders.length; countToday.textContent=orders.filter(o=>o.createdAt.slice(0,10)===todayISO()).length;

    ordersTableBody.innerHTML=list.map(o=>{
      const itemsShort=o.items.map(i=>`${i.name}Ã—${i.qty}`).join(', ');
      const profit=o.items.reduce((s,i)=> s + ( (i.price||0)-(i.cost||0) )*i.qty, 0);
      return `<tr>
        <td>${new Date(o.createdAt).toLocaleString()}</td>
        <td><code>${o.id}</code><div class="muted" style="font-size:12px">Profit est: ${INR(profit)}</div></td>
        <td><div style="font-weight:600">${o.customer.name}</div><div class="muted" style="font-size:12px">${o.customer.phone} â€¢ ${o.customer.email||''}</div><div class="muted" style="font-size:12px">${o.customer.address}, ${o.customer.city} ${o.customer.pincode}</div></td>
        <td>${itemsShort}</td>
        <td>${INR(o.total)}</td>
        <td><select data-status="${o.id}">${['New','Processing','Shipped','Completed','Cancelled'].map(s=>`<option ${o.status===s?'selected':''}>${s}</option>`).join('')}</select></td>
        <td><button class="btn" data-forward="${o.id}">Forward to Supplier</button></td>
        <td><button class="btn ghost" data-view="${o.id}">View</button> <button class="btn ghost" data-del="${o.id}">Delete</button></td>
      </tr>`;
    }).join('');

    ordersTableBody.querySelectorAll('[data-status
